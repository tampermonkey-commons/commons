const sleep=n=>new Promise(e=>setTimeout(e,n)),defaultCDN="https://cdn.jsdelivr.net/npm";async function dynamicInjectByUrl(e,n=10,t=void 0){let l=null,s=(e.endsWith(".js")?((l=document.createElement("script")).src=e,document.body.appendChild(l)):e.endsWith(".css")&&((l=document.createElement("link")).href=e,l.rel="stylesheet",document.head.appendChild(l)),!1),i=null;for(;await sleep(n),!(s=null==t||null!=(i=t())););return i}async function dynamicInjectFromCDN(e,n,t=void 0,l="https://cdn.jsdelivr.net/npm",s=10,i=void 0){let u=e;return null!=t&&""!=t.trim()&&(u+="@"+t),dynamicInjectByUrl(l+"/"+u+n,s,i)}async function dynamicInject(e,n,t=void 0,l=void 0){return dynamicInjectFromCDN(e,n,t,defaultCDN,10,l)}function createVueApp(e,n,t,l,s,i){return null==t?null:((n=n.createApp(t)).use(l),n.provide("$message",l.ElMessage),null!=i&&(t=s.createStore(i),n.use(t)),n.mount("#"+e),n)}async function dynamicInjectVue(e,n,t){var l=document.getElementById(e),l=(null==l&&((l=document.createElement("div")).id=e,document.body.appendChild(l)),await dynamicInject("vue","/dist/vue.global.prod.js","3.2",function(){var e;return"undefined"!=typeof Vue?(e=Vue,console.log(`Vue ${e.version} Loaded`),e):null})),s=await dynamicInject("element-plus","/dist/index.full.min.js","2.3",function(){var e;return"undefined"!=typeof ElementPlus?(e=ElementPlus,console.log(`Element Plus ${e.version} Loaded`),e):null}),i=(dynamicInject("element-plus","/dist/index.min.css","2.3"),await dynamicInject("vuex","/dist/vuex.global.min.js","4.1",function(){var e;return"undefined"!=typeof Vuex?(e=Vuex,console.log(`Vuex ${e.version} Loaded`),e):null}));return createVueApp(e,l,n,s,i,t)}class Logger{constructor(e){this.version="0.1.0",this.name=e}getTime(){var e=new Date;let n=e.getHours()+"",t=(1==n.length&&(n="0"+n),e.getMinutes()+""),l=(1==t.length&&(t="0"+t),e.getSeconds()+"");return 1==l.length&&(l="0"+l),n+":"+t+":"+l}debug(e,...n){e="%s [%s] "+e;0<n.length?console.debug(e,this.getTime(),this.name,n):console.debug(e,this.getTime(),this.name)}info(e,...n){e="%s [%s] "+e;0<n.length?console.info(e,this.getTime(),this.name,n):console.info(e,this.getTime(),this.name)}warn(e,...n){e="%s [%s] "+e;0<n.length?console.warn(e,this.getTime(),this.name,n):console.warn(e,this.getTime(),this.name)}error(e,...n){e="%s [%s] "+e;0<n.length?console.error(e,this.getTime(),this.name,n):console.error(e,this.getTime(),this.name)}}class UserScriptConfig{constructor(){this.version="0.1.0"}listValues(){return GM_listValues()}containsKey(e){return null!=this.getValue(e,void 0)}getValue(e,n){return GM_getValue(e,n)}setValue(e,n){return GM_setValue(e,n)}getOrInitValue(e,n){let t=this.getValue(e,void 0);return null==t&&(t=n,logger.info(`设置${e}的初始值为：`+t),this.setValue(e,n)),t}deleteValue(e){GM_deleteValue(e)}}